---
title: 数据库设计三大范式
date: 2019-02-01 00:02:03
categories:
- 数据库
tags:
- 数据库
---

## 为什么需要数据规范化

![image-20201217211501940](https://photo.woilanlan.top/blog/img/2020/12/17/image-20201217211501940.png)

存在的问题

信息重复：客房描述，客房类型，床位数

更新异常：客房类型的更新

插入异常：无法正确表示信息。例：2002和2003房间类型相同，但价格不同。

删除异常：丢失有效信息。例：删除1001房间则，将丢失单人间类型客房信息。

## 第一范式

第—范式的目标是确保每列的原子性

- 如果每列都是不可再分的最小数据单元(也称为最小的原子单元），则满足第一范式( 1NF )

例：

| CustID | Address  |
| :----: | :------: |
|   1    | 中国北京 |
|   2    | 美国纽约 |
|   3    | 英国伦敦 |
|   4    | 日本东京 |

拆分

| CustID | Country | City |
| :----: | :-----: | :--: |
|   1    |  中国   | 北京 |
|   2    |  美国   | 纽约 |
|   3    |  英国   | 伦敦 |
|   4    |  日本   | 东京 |

## 第二范式

第二范式要求每个表只描述一件事情。

Guest Registration

|   字段   |  举例  |
| :------: | :----: |
| 客人编号 | C1002  |
|   姓名   | Addr1  |
|  客房号  |  2002  |
| 客房状态 |  入住  |
| 客房类型 | 标准间 |
|  床位数  |   2    |
| 入住人数 |   2    |
|   价格   | 168.00 |

拆分为

Guest

|   字段   |  举例  |
| :------: | :----: |
| 客人编号 | C1002  |
|   姓名   | Addr1  |
|  客房号  |  2002  |

Room

|   字段   |  举例  |
| :------: | :----: |
|  客房号  |  2002  |
| 客房状态 |  入住  |
| 客房类型 | 标准间 |
|  床位数  |   2    |
| 入住人数 |   2    |
|   价格   | 168.00 |

床位数和价格依赖于客房类型，客房类型依赖于客房号，形成了传递依赖关系，就容易出现数据冗余。

## 第三范式

如果一个关系满足 2NF ,并且除了主键以外的其他列都不传递依赖于主键列，则满足第三范式（3NF）

Room

|   字段   |  举例  |
| :------: | :----: |
|  客房号  |  2002  |
| 客房状态 |  入住  |
| 客房类型 | 标准间 |
|  床位数  |   2    |
| 入住人数 |   2    |
|   价格   | 168.00 |

拆分

Room

|     字段     |  举例  |
| :----------: | :----: |
|    客房号    |  2002  |
| 客房状态编号 |  001   |
| 客房类型编号 |  002   |
|   入住人数   |   2    |

RoomType

|     字段     |  举例  |
| :----------: | :----: |
| 客房类型编号 |  002   |
| 客房类型名称 | 标准间 |
|    床位数    |   2    |
|     价格     |  168   |

RoomState

|     字段     | 举例 |
| :----------: | :--: |
| 客房状态编号 | 001  |
| 客房状态名称 | 入住 |

## 酒店管理系统 E-R 图

![image-20201217214923405](https://photo.woilanlan.top/blog/img/2020/12/17/image-20201217214923405.png)

## 酒店管理系统数据库模型图

![image-20201217215209685](https://photo.woilanlan.top/blog/img/2020/12/17/image-20201217215209685.png)
